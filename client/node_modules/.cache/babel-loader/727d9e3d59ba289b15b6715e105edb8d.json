{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Shinnosuke\\\\react-express-elb\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Shinnosuke\\\\react-express-elb\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\Shinnosuke\\\\react-express-elb\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Shinnosuke\\\\react-express-elb\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Shinnosuke\\\\react-express-elb\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import\"./App.css\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={isSubmit:false,data:[],originData:[],newName:\"匿名\",newText:\" \"};_this.initialGetData();_this.handleChangeName=_this.handleChangeName.bind(_assertThisInitialized(_this));_this.handleChangeText=_this.handleChangeText.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"initialGetData\",value:function initialGetData(){var _this2=this;fetch('/data/get').then(function(response){return response.json();}).then(function(temp){_this2.setState({data:temp,originData:temp});});}},{key:\"getData\",value:function getData(){var _this3=this;fetch('/data/get').then(function(response){return response.json();}).then(function(temp){_this3.setState({data:temp});});}},{key:\"addData\",value:function addData(){var sendData={name:this.state.newName,text:this.state.newText};var param={method:\"POST\",headers:{\"Content-Type\":\"application/json; charset=utf-8\"},// リクエストボディ\nbody:JSON.stringify(sendData)};fetch('/data/create',param).then(function(res){return res.text();}).then(function(data){return console.log(data);}).catch(function(err){return console.error(err);});}},{key:\"deleteData\",value:function deleteData(tempID,e){e.preventDefault();var sendData={id:tempID};var param={method:\"POST\",headers:{\"Content-Type\":\"application/json; charset=utf-8\"},body:JSON.stringify(sendData)};fetch('/data/delete',param).then(function(res){return res.text();}).then(function(data){return console.log(data);}).catch(function(err){return console.error(err);});this.getData();}},{key:\"handleChangeName\",value:function handleChangeName(event){this.setState({newName:event.target.value});}},{key:\"handleChangeText\",value:function handleChangeText(event){this.setState({newText:event.target.value});}},{key:\"handleSubmit\",value:function handleSubmit(){if(this.state.isSubmit){this.setState({isSubmit:false});}else{this.addComment();this.setState({isSubmit:true});}//console.log(this.state.isSubmit);\nreturn false;}},{key:\"addComment\",value:function addComment(){this.addData();this.getData();}},{key:\"render\",value:function render(){var _this4=this;var newMessage;if(this.state.isSubmit){newMessage=/*#__PURE__*/React.createElement(\"div\",{className:\"newMes\"},/*#__PURE__*/React.createElement(\"p\",null,\"\\u9001\\u4FE1\\u5B8C\\u4E86!!\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(){return _this4.handleSubmit();}},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"OK\"})));}else{newMessage=/*#__PURE__*/React.createElement(\"div\",{className:\"newMes\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(){return _this4.handleSubmit();}},/*#__PURE__*/React.createElement(\"p\",{style:{fontSize:\"20px\",textDecoration:\"underline\"}},\"\\u65B0\\u898F\\u30B3\\u30E1\\u30F3\\u30C8\"),/*#__PURE__*/React.createElement(\"p\",null,\"\\u540D\\u524D\"),/*#__PURE__*/React.createElement(\"input\",{id:\"inputName\",type:\"text\",onChange:this.handleChangeName}),/*#__PURE__*/React.createElement(\"p\",null,\"\\u30B3\\u30E1\\u30F3\\u30C8\\u5185\\u5BB9\"),/*#__PURE__*/React.createElement(\"div\",{className:\"newT\"},/*#__PURE__*/React.createElement(\"textarea\",{onChange:this.handleChangeText}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"\\u9001\\u4FE1\"}))));}return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"h1\",null,\"\\u81EA\\u7531\\u306B\\u8A71\\u305D\\u3046\"),/*#__PURE__*/React.createElement(\"hr\",{style:{backgroundColor:\"black\"}}),/*#__PURE__*/React.createElement(\"ul\",{className:\"showCom\"},this.state.data.map(function(temp){return/*#__PURE__*/React.createElement(\"li\",{key:temp.id,style:{listStyle:\"none\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"showName\"},/*#__PURE__*/React.createElement(\"p\",null,temp.name)),/*#__PURE__*/React.createElement(\"div\",{className:\"textFlex\"},/*#__PURE__*/React.createElement(\"p\",null,temp.text),/*#__PURE__*/React.createElement(\"a\",{href:\"/#\",onClick:function onClick(e){return _this4.deleteData(temp.id,e);}},\"\\u524A\\u9664\")),/*#__PURE__*/React.createElement(\"hr\",null));}),/*#__PURE__*/React.createElement(\"hr\",{className:\"bottomLine\"})),/*#__PURE__*/React.createElement(\"div\",null,newMessage));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/Shinnosuke/react-express-elb/client/src/App.js"],"names":["React","Component","App","props","state","isSubmit","data","originData","newName","newText","initialGetData","handleChangeName","bind","handleChangeText","fetch","then","response","json","temp","setState","sendData","name","text","param","method","headers","body","JSON","stringify","res","console","log","catch","err","error","tempID","e","preventDefault","id","getData","event","target","value","addComment","addData","newMessage","handleSubmit","fontSize","textDecoration","backgroundColor","map","listStyle","deleteData"],"mappings":"41BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,WAAP,C,GAEMC,CAAAA,G,0FACJ,aAAYC,KAAZ,CAAmB,qCACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,QAAQ,CAAE,KADC,CAEXC,IAAI,CAAE,EAFK,CAGXC,UAAU,CAAE,EAHD,CAIXC,OAAO,CAAE,IAJE,CAKXC,OAAO,CAAE,GALE,CAAb,CAOA,MAAKC,cAAL,GACA,MAAKC,gBAAL,CAAwB,MAAKA,gBAAL,CAAsBC,IAAtB,+BAAxB,CACA,MAAKC,gBAAL,CAAwB,MAAKA,gBAAL,CAAsBD,IAAtB,+BAAxB,CAXiB,aAYlB,C,uEAEgB,iBACfE,KAAK,CAAC,WAAD,CAAL,CACGC,IADH,CACQ,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EADhB,EAEGF,IAFH,CAEQ,SAAAG,IAAI,CAAI,CACZ,MAAI,CAACC,QAAL,CAAc,CACZb,IAAI,CAAEY,IADM,CAEZX,UAAU,CAAEW,IAFA,CAAd,EAID,CAPH,EAQD,C,yCAES,iBACRJ,KAAK,CAAC,WAAD,CAAL,CACGC,IADH,CACQ,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EADhB,EAEGF,IAFH,CAEQ,SAAAG,IAAI,CAAI,CACZ,MAAI,CAACC,QAAL,CAAc,CACZb,IAAI,CAAEY,IADM,CAAd,EAGD,CANH,EAOD,C,yCAES,CACR,GAAME,CAAAA,QAAQ,CAAG,CAACC,IAAI,CAAE,KAAKjB,KAAL,CAAWI,OAAlB,CAA2Bc,IAAI,CAAE,KAAKlB,KAAL,CAAWK,OAA5C,CAAjB,CACA,GAAMc,CAAAA,KAAK,CAAI,CACbC,MAAM,CAAE,MADK,CAEbC,OAAO,CAAE,CACP,eAAgB,iCADT,CAFI,CAMb;AACAC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeR,QAAf,CAPO,CAAf,CAUAN,KAAK,CAAC,cAAD,CAAiBS,KAAjB,CAAL,CACGR,IADH,CACQ,SAACc,GAAD,QAASA,CAAAA,GAAG,CAACP,IAAJ,EAAT,EADR,EAEGP,IAFH,CAEQ,SAACT,IAAD,QAAUwB,CAAAA,OAAO,CAACC,GAAR,CAAazB,IAAb,CAAV,EAFR,EAGG0B,KAHH,CAGS,SAACC,GAAD,QAASH,CAAAA,OAAO,CAACI,KAAR,CAAeD,GAAf,CAAT,EAHT,EAID,C,8CAEUE,M,CAAQC,C,CAAG,CACpBA,CAAC,CAACC,cAAF,GACA,GAAMjB,CAAAA,QAAQ,CAAG,CAACkB,EAAE,CAAEH,MAAL,CAAjB,CACA,GAAMZ,CAAAA,KAAK,CAAI,CACbC,MAAM,CAAE,MADK,CAEbC,OAAO,CAAE,CACP,eAAgB,iCADT,CAFI,CAKbC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeR,QAAf,CALO,CAAf,CAQAN,KAAK,CAAC,cAAD,CAAiBS,KAAjB,CAAL,CACGR,IADH,CACQ,SAACc,GAAD,QAASA,CAAAA,GAAG,CAACP,IAAJ,EAAT,EADR,EAEGP,IAFH,CAEQ,SAACT,IAAD,QAAUwB,CAAAA,OAAO,CAACC,GAAR,CAAazB,IAAb,CAAV,EAFR,EAGG0B,KAHH,CAGS,SAACC,GAAD,QAASH,CAAAA,OAAO,CAACI,KAAR,CAAeD,GAAf,CAAT,EAHT,EAKA,KAAKM,OAAL,GACD,C,0DAEgBC,K,CAAO,CACtB,KAAKrB,QAAL,CAAc,CAACX,OAAO,CAAEgC,KAAK,CAACC,MAAN,CAAaC,KAAvB,CAAd,EACD,C,0DAEgBF,K,CAAO,CACtB,KAAKrB,QAAL,CAAc,CAACV,OAAO,CAAE+B,KAAK,CAACC,MAAN,CAAaC,KAAvB,CAAd,EACD,C,mDAEc,CACb,GAAG,KAAKtC,KAAL,CAAWC,QAAd,CAAwB,CACtB,KAAKc,QAAL,CAAc,CAACd,QAAQ,CAAE,KAAX,CAAd,EACD,CAFD,IAEO,CACL,KAAKsC,UAAL,GACA,KAAKxB,QAAL,CAAc,CAACd,QAAQ,CAAE,IAAX,CAAd,EACD,CACD;AACA,MAAO,MAAP,CACD,C,+CAEY,CACX,KAAKuC,OAAL,GACA,KAAKL,OAAL,GACD,C,uCAEQ,iBAEP,GAAIM,CAAAA,UAAJ,CACA,GAAI,KAAKzC,KAAL,CAAWC,QAAf,CAAyB,CACvBwC,UAAU,cACR,2BAAK,SAAS,CAAC,QAAf,eACE,0DADF,cAEE,4BAAM,QAAQ,CAAE,0BAAI,CAAA,MAAI,CAACC,YAAL,EAAJ,EAAhB,eACE,6BAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,IAA3B,EADF,CAFF,CADF,CAQD,CATD,IASO,CACLD,UAAU,cACR,2BAAK,SAAS,CAAC,QAAf,eACE,4BAAM,QAAQ,CAAE,0BAAI,CAAA,MAAI,CAACC,YAAL,EAAJ,EAAhB,eACE,yBAAG,KAAK,CAAE,CAACC,QAAQ,CAAE,MAAX,CAAmBC,cAAc,CAAE,WAAnC,CAAV,yCADF,cAEE,4CAFF,cAGE,6BAAO,EAAE,CAAC,WAAV,CAAsB,IAAI,CAAC,MAA3B,CAAkC,QAAQ,CAAE,KAAKrC,gBAAjD,EAHF,cAIE,oEAJF,cAKE,2BAAK,SAAS,CAAC,MAAf,eACE,gCAAU,QAAQ,CAAE,KAAKE,gBAAzB,EADF,cAEE,6BAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,cAA3B,EAFF,CALF,CADF,CADF,CAeD,CAED,mBACE,2BAAK,SAAS,CAAC,KAAf,eACE,qEADF,cAEE,0BAAI,KAAK,CAAE,CAACoC,eAAe,CAAE,OAAlB,CAAX,EAFF,cAGE,0BAAI,SAAS,CAAC,SAAd,EAEC,KAAK7C,KAAL,CAAWE,IAAX,CAAgB4C,GAAhB,CAAoB,SAAChC,IAAD,qBACnB,0BAAI,GAAG,CAAEA,IAAI,CAACoB,EAAd,CAAkB,KAAK,CAAE,CAACa,SAAS,CAAE,MAAZ,CAAzB,eACE,2BAAK,SAAS,CAAC,UAAf,eACE,6BAAIjC,IAAI,CAACG,IAAT,CADF,CADF,cAIE,2BAAK,SAAS,CAAC,UAAf,eACE,6BAAIH,IAAI,CAACI,IAAT,CADF,cAEE,yBAAG,IAAI,CAAC,IAAR,CAAa,OAAO,CAAE,iBAACc,CAAD,QAAK,CAAA,MAAI,CAACgB,UAAL,CAAgBlC,IAAI,CAACoB,EAArB,CAAyBF,CAAzB,CAAL,EAAtB,iBAFF,CAJF,cASE,8BATF,CADmB,EAApB,CAFD,cAeA,0BAAI,SAAS,CAAC,YAAd,EAfA,CAHF,cAqBA,+BACGS,UADH,CArBA,CADF,CA4BD,C,iBA3Je5C,S,EA6JlB,cAAeC,CAAAA,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport \"./App.css\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmit: false,\n      data: [],\n      originData: [],\n      newName: \"匿名\",\n      newText: \" \",\n    }\n    this.initialGetData();\n    this.handleChangeName = this.handleChangeName.bind(this);\n    this.handleChangeText = this.handleChangeText.bind(this);\n  }\n\n  initialGetData() {\n    fetch('/data/get')\n      .then(response => response.json())\n      .then(temp => {\n        this.setState({\n          data: temp,\n          originData: temp\n        });\n      });\n  }\n\n  getData() {\n    fetch('/data/get')\n      .then(response => response.json())\n      .then(temp => {\n        this.setState({\n          data: temp\n        });\n      });\n  }\n\n  addData() {\n    const sendData = {name: this.state.newName, text: this.state.newText};\n    const param  = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json; charset=utf-8\"\n      },\n    \n      // リクエストボディ\n      body: JSON.stringify(sendData)\n    };\n    \n    fetch('/data/create', param)\n      .then((res) => res.text())\n      .then((data) => console.log( data ))\n      .catch((err) => console.error( err ));\n  }\n\n  deleteData(tempID, e) {\n    e.preventDefault();\n    const sendData = {id: tempID};\n    const param  = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json; charset=utf-8\"\n      },\n      body: JSON.stringify(sendData)\n    };\n    \n    fetch('/data/delete', param)\n      .then((res) => res.text())\n      .then((data) => console.log( data ))\n      .catch((err) => console.error( err ));\n    \n    this.getData();\n  }\n\n  handleChangeName(event) {\n    this.setState({newName: event.target.value});\n  }\n\n  handleChangeText(event) {\n    this.setState({newText: event.target.value});\n  }\n\n  handleSubmit() {\n    if(this.state.isSubmit) {\n      this.setState({isSubmit: false});\n    } else {\n      this.addComment();\n      this.setState({isSubmit: true});\n    }\n    //console.log(this.state.isSubmit);\n    return false;\n  }\n\n  addComment() {\n    this.addData();\n    this.getData();\n  }\n\n  render() {\n\n    let newMessage;\n    if (this.state.isSubmit) {\n      newMessage = (\n        <div className=\"newMes\">\n          <p>送信完了!!</p>\n          <form onSubmit={()=>this.handleSubmit()}>\n            <input type=\"submit\" value=\"OK\" />\n          </form>\n        </div>\n      );\n    } else {\n      newMessage = (\n        <div className=\"newMes\">\n          <form onSubmit={()=>this.handleSubmit()}>\n            <p style={{fontSize: \"20px\", textDecoration: \"underline\"}}>新規コメント</p>\n            <p>名前</p>\n            <input id=\"inputName\" type=\"text\" onChange={this.handleChangeName}/>\n            <p>コメント内容</p>\n            <div className=\"newT\">\n              <textarea onChange={this.handleChangeText} />\n              <input type=\"submit\" value=\"送信\" />\n            </div>\n            \n          </form>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"App\">\n        <h1>自由に話そう</h1>\n        <hr style={{backgroundColor: \"black\"}}></hr>\n        <ul className=\"showCom\">\n        \n        {this.state.data.map((temp) => \n          <li key={temp.id} style={{listStyle: \"none\"}}>\n            <div className=\"showName\">\n              <p>{temp.name}</p>\n            </div>\n            <div className=\"textFlex\">\n              <p>{temp.text}</p>\n              <a href=\"/#\" onClick={(e)=>this.deleteData(temp.id, e)}>削除</a>\n            </div>\n            \n            <hr></hr>\n          </li>\n        )}\n        <hr className=\"bottomLine\"></hr>\n        </ul>\n          \n      <div>\n        {newMessage}\n      </div>\n        \n      </div>\n    );\n  }\n}\nexport default App;"]},"metadata":{},"sourceType":"module"}